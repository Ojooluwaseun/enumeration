<mat-card><form class="formwidth"  #assetForm="ngForm">
    <mat-accordion>
    <table class="fullwidth" cellspacing="0">
        <mat-expansion-panel class="panelwidth" [expanded]="step === 0" (opened)="setStep(0)" hideToggle="true">
        <mat-expansion-panel-header>
        <mat-panel-title><h3><span class="glyphicon glyphicon-home"></span> Building Details</h3></mat-panel-title>
        </mat-expansion-panel-header>
        <tr>
            <td> 
               <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Owner's TIN"  id="ownerid" required [(ngModel)]="assetdata.ownerid" name="ownerid" #ownerid="ngModel" [ngModelOptions]="{updateOn: 'blur'}">
                    <div  [hidden]="ownerid.valid || ownerid.pristine" class="alert alert-danger">
                        Owner's TIN is Required
                    </div>
                </mat-form-field>  
            </td>
            <td>
                
                <div *ngFor="let d of data | async">  
                    <h5 *ngIf="d.tin == assetdata.ownerid">{{d.firstname}} {{d.surname}} {{d.middlename}}</h5>  
                </div>
            </td>
           
        </tr>
            
        <tr> 
            <td>
                <mat-form-field class="fullwidth">
                    <mat-select placeholder="LGA" [(ngModel)]="assetdata.lga" name='lga'>
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let lga of lgas" [value]="lga">{{lga}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
            <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Ward"  id="ward" [(ngModel)]="assetdata.ward" name="ward">
                </mat-form-field>
            </td>
            <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Town"  id="town" [(ngModel)]="assetdata.town" name="town">
                </mat-form-field>
            </td>
            
        </tr>
        
        <tr>
            <td>
                <mat-form-field class="fullwidth">
                    <mat-select placeholder="Building Completion" [(ngModel)]="assetdata.building_completion" name='building_completion'>
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let bc of buildingcompletions" [value]="bc">{{bc}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>

             <td>
                <mat-form-field class="fullwidth">
                    <mat-select placeholder="Building Purpose" [(ngModel)]="assetdata.building_purpose" name='building_purpose'>
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let bp of buildingpurposes" [value]="bp">{{bp}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
        </tr>
        <tr>
            <td>
                <mat-form-field class="fullwidth">
                    <mat-select placeholder="Building Occupancy" [(ngModel)]="assetdata.building_occupancy" name='building_occupancy'>
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let bo of buildingoccupancies" [value]="bo">{{bo}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>

            <td>
                <mat-form-field class="fullwidth">
                    <mat-select placeholder="Occupancy Type" [(ngModel)]="assetdata.occupancy_type" name='occupancy_type'>
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let ot of occupancytypes" [value]="ot">{{ot}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
             <td>
                <mat-form-field class="fullwidth">
                    <mat-select placeholder="Building Type" [(ngModel)]="assetdata.building_type" name='building_type'>
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let bt of buildingtypes" [value]="bt">{{bt}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
        </tr>
        <tr>
            <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Value"  id="value" [(ngModel)]="assetdata.value" name="value">
                </mat-form-field>
            </td>
        </tr>
        <tr> 
            <label>Location</label>
             <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Latitude"  id="latitude" [(ngModel)]="assetdata.latitude" name="latitude">
                </mat-form-field>
            </td>
             <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Longitude"  id="longitude" [(ngModel)]="assetdata.longitude" name="longitude">
                </mat-form-field>
            </td>
        </tr>
        <mat-action-row>
            <button mat-button color="primary" (click)="nextStep()">Next</button>
        </mat-action-row>
    </mat-expansion-panel>
    </table>  
    <table  class="fullwidth" cellspacing="0">
        <mat-expansion-panel class="panelwidth" [expanded]="step === 1" (opened)="setStep(1)" hideToggle="true">
        <mat-expansion-panel-header>
        <mat-panel-title><h3><span class="glyphicon glyphicon-map-marker"></span> Address</h3></mat-panel-title>
        </mat-expansion-panel-header>
        <tr>
            <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="House Number"  id="house_no" [(ngModel)]="assetdata.house_no" name="house_no">
                </mat-form-field>
            </td>
            <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Plot Number"  id="plot_no" [(ngModel)]="assetdata.plot_no" name="plot_no">
                </mat-form-field>
            </td>
            <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Block Number"  id="block_no" [(ngModel)]="assetdata.block_no" name="block_no">
                </mat-form-field>
            </td>
        </tr>
        <tr>
            <td>
                <mat-form-field class="fullwidth">
                    <input matInput type="text" placeholder="Flat Number"  id="flat_no" [(ngModel)]="assetdata.flat_no" name="flat_no">
                </mat-form-field>
            </td>
            <td>
                <mat-form-field class="fullwidth">
                    <textarea matInput type="text" placeholder="Street Name"  id="street_name" [(ngModel)]="assetdata.street_name" name="street_name"></textarea>
                </mat-form-field>
            </td>
            <td>
                <mat-form-field class="fullwidth">
                    <textarea matInput placeholder="District Name"  id="district_name" [(ngModel)]="assetdata.district_name" name="district_name"></textarea>
                </mat-form-field>
            </td>


        </tr>
        <mat-action-row>
            <button mat-button color="warn" (click)="prevStep()">Previous</button>
            <button mat-raised-button color="primary" (click)="nextStep()" (click)="onSubmit()">Submit</button>
        </mat-action-row>
        </mat-expansion-panel>
    </table>
    <table  class="fullwidth" cellspacing="0">
        <mat-expansion-panel class="panelwidth" [expanded]="step === 2" (opened)="setStep(2)" hideToggle="true">
        <mat-expansion-panel-header>
        <mat-panel-title><h3><span class="glyphicon glyphicon-map-marker"></span>Profile Asset</h3></mat-panel-title>
        </mat-expansion-panel-header>
        <tr>
          <td>
                <mat-form-field class="fullwidth">
                    <mat-select placeholder="--Select Profiles--" name='profiles' [(ngModel)]="assetdata.profile" multiple>
                        <mat-option *ngFor="let p of profiles | async"  [value]="p">{{p.id}}/{{p.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>   

        </tr>
        <mat-action-row>
            <button mat-button color="warn" (click)="prevStep()">Previous</button>
            <button mat-button-raised color="primary" (click)="addAssetProfile()">Add Profile</button>
        </mat-action-row>
        </mat-expansion-panel>
    </table>
    </mat-accordion>
    </form> 
</mat-card>
 
 